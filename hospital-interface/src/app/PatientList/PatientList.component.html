<div (click)="close()" *ngIf="onAdd||onUpdate||onDelete" style="position: fixed;

background: black;

top: 0px;

opacity: 0.4;

height: 100%;

width: 100%;

left: 0;
z-index: 2;
width: 25%;"></div>


<div *ngIf="onAdd||onUpdate||onDelete" style="position: fixed;

top: 50%;

left: 50%;

background: white;

border-radius: 10px;

padding: 10px;
transform: translate(-50%,-50%);
z-index: 3;">
  <form *ngIf="onAdd||onUpdate" (ngSubmit)="submit()" #patientForm="ngForm">.
    <div class="row justify-content-center">
      <h5 *ngIf="onAdd">
        Nouveau patient :
      </h5>
      <h5 *ngIf="onUpdate">
        Mise à jour patient :
      </h5>
    </div>


      <div class="form-group">
        <label for="first-name">Prénom</label>
        <input class="form-control" [(ngModel)]="model.firstName" id="first-name" name="first-name" type="text"
          placeholder="Prénom" required autofocus>
      </div>
      <div class="form-group">
        <label for="last-name">Nom</label>
        <input class="form-control" [(ngModel)]="model.lastName" id="last-name" name="last-name" type="text"
          placeholder="Nom" required>
      </div>
      <div class="form-group">
        <label for="birthday">Date de naissance</label>
        <input class="form-control" [(ngModel)]="model.birthDate" id="birthday" name="birthday" type="date" required>
      </div>

      <div class="form-group">
        <label for="address">Adresse</label>
        <input class="form-control" [(ngModel)]="model.address" id="address" name="address" type="text" required>
      </div>

      <div class="form-group">
        <label for="phone">Numéro du portable</label>
        <input class="form-control" [(ngModel)]="model.phone" id="phone" name="phone" type="text" required>
      </div>

    <table>
      <tr>
        <td><button type="submit" [disabled]="!patientForm.form.valid" class="btn btn-default">Confirmer</button></td>
        <td><button (click)="close()" class="btn btn-default">Annuler</button></td>
      </tr>
    </table>
  </form>

  <form *ngIf="onDelete">
    <span>
      Vous être sure de supprimer ces élements ?
    </span>
    <table class="table">
      <tr>
        <th>Prénom
        </th>
        <th>Nom
        </th>
        <th>Adresse
        </th>
        <th>Portable
        </th>
        <th>date de naissance
        </th>
      </tr>
      <tr *ngFor="let patient of this.selected(); let i = index">
        <td>{{ patient.firstName }}</td>
        <td>{{ patient.lastName }}</td>
        <td>{{ patient.address }}</td>
        <td>{{ patient.phone }}</td>
        <td>{{ patient.birthDate }}</td>
      </tr>
    </table>
    <table>
      <tr>
        <td><button (click)="submit()" class="btn btn-default">Confirmer</button></td>
        <td><button (click)="close()" class="btn btn-default">Annuler</button></td>
      </tr>
    </table>
  </form>
</div>


<div class="row">
  <div class="col-sm-2"></div>
  <div class="col-sm-8">
    <table class="table">
      <tr>
        <th></th>
        <th>Prénom</th>
        <th>Nom</th>
        <th>Adresse</th>
        <th>Télephone</th>
        <th>Date de naissance</th>
      </tr>
      <tr [(ngModel)]="pList" name="pList" *ngFor="let patient of pList; let i = index" ngDefaultControl>
        <td>
          <input type="checkbox" id="ck-{{i+1}}" (change)="checking(i)">
        </td>
        <td (click)="check('ck-'+(i+1),i)">{{ patient.firstName }}</td>
        <td (click)="check('ck-'+(i+1),i)">{{ patient.lastName }}</td>
        <td (click)="check('ck-'+(i+1),i)">{{ patient.address }}</td>
        <td (click)="check('ck-'+(i+1),i)">{{ patient.phone }}</td>
        <td (click)="check('ck-'+(i+1),i)">{{ patient.birthDate }}</td>
      </tr>
    </table>






  </div>
  <div class="col-sm-2">
    <ul class="list-group" style="list-style-type: none;">
      <li *ngIf="!(onSelect)">
        <button [disabled]="onSelect" (click)="adding()" class="btn btn-default">
          Ajouter
        </button>
      </li>
      <li *ngIf="this.selected().length===1">
        <button [disabled]="this.selected().length!==1" (click)="updating()" class="btn btn-default">
          Modifier
        </button>
      </li>
      <li>
        <button [disabled]="this.selected().length<=0" (click)="deleting()" class="btn btn-default">
          Supprimer
        </button>
      </li>

    </ul>

  </div>
</div>
